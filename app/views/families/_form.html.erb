<%= form_for @family do |f| %>
  <% if @family.errors.any? %>
    <% @family.errors.full_messages.each do |error_msg| %>
      <p class="form_error"><%= error_msg %></p>
    <% end %>
  <% end %>
  
  <p class="form_field">
    <%= f.label :familyname, "Family Name" %><br />
    <%= f.text_field :familyname %>
  </p>
  
  <p class="form_field">
    <%= f.label :address %><br />
    <%= f.text_field :address %>
  </p>
  
  <p class="form_field">
    <%= f.label :city %><br />
    <%= f.text_field :city %>
  </p>
  
  <p class="form_field">
    <%= f.label :state %><br />
    <%= f.select(:state, @family.states, :selected => 'NE') %>
  
  <p class="form_field">
    <%= f.label :zipcode %><br />
    <%= f.text_field :zipcode %>
  </p>
  
  <p class="form_field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </p>
  
  <p class="form_field">
    <%= f.label :alt_phone %><br />
    <%= f.text_field :alt_phone %>
  </p>
  
  <p class="form_field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  
  <p class="form_field">
    <%= f.label :alt_email %><br />
    <%= f.text_field :alt_email %>
  </p>
  
  <%= f.fields_for :parents do |parent| %>
    <%= render 'parent_fields', f: parent %>
  <% end %>
  <%= link_to_add_fields "Add Parent", f, :parents %>
  
  <%= f.fields_for :children do |child| %>
    <%= render 'child_fields', f: child %>
  <% end %>
  <%= link_to_add_fields "Add Child", f, :children %>
  
  <%= f.submit %>
<% end %>